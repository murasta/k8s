$ kubectl apply -f pod.yaml
pod/myapp-pod created
$ kubectl get pods
NAME        READY   STATUS    RESTARTS   AGE
myapp-pod   1/1     Running   0          61s
$ kubectl get po  
NAME        READY   STATUS    RESTARTS   AGE
myapp-pod   1/1     Running   0          2m8s
$ kubectl get po -A
NAMESPACE     NAME                                        READY   STATUS    RESTARTS      AGE
kube-system   calico-node-w8z4q                           1/1     Running   1 (97m ago)   99m
kube-system   calico-kube-controllers-79568db7f8-cxrxj    1/1     Running   0             99m
kube-system   coredns-6f5f9b5d74-mnq5c                    1/1     Running   0             99m
kube-system   hostpath-provisioner-69cd9ff5b8-lrljt       1/1     Running   0             96m
ingress       nginx-ingress-microk8s-controller-5w85d     1/1     Running   0             96m
kube-system   kubernetes-dashboard-dc96f9fc-99cvg         1/1     Running   0             96m
kube-system   dashboard-metrics-scraper-7bc864c59-msmwh   1/1     Running   0             96m
kube-system   metrics-server-6f754f88d-gh5v2              1/1     Running   0             96m
default       myapp-pod                                   1/1     Running   0             2m14s
$ kubectl get all
NAME            READY   STATUS    RESTARTS   AGE
pod/myapp-pod   1/1     Running   0          4m14s

NAME                 TYPE        CLUSTER-IP     EXTERNAL-IP   PORT(S)   AGE
service/kubernetes   ClusterIP   10.152.183.1   <none>        443/TCP   101m
$ kubectl get pod -A --selector="app=myapp"
NAMESPACE   NAME        READY   STATUS    RESTARTS   AGE
default     myapp-pod   1/1     Running   0          5m4s
$ kubectl exec -ti myapp-pod -- curl localhost
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
html { color-scheme: light dark; }
body { width: 35em; margin: 0 auto;
font-family: Tahoma, Verdana, Arial, sans-serif; }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
$ kubectl logs myapp-pod
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh
/docker-entrypoint.sh: Configuration complete; ready for start up
2023/05/16 11:31:59 [notice] 1#1: using the "epoll" event method
2023/05/16 11:31:59 [notice] 1#1: nginx/1.23.4
2023/05/16 11:31:59 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6) 
2023/05/16 11:31:59 [notice] 1#1: OS: Linux 5.4.0-122-generic
2023/05/16 11:31:59 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 65536:65536
2023/05/16 11:31:59 [notice] 1#1: start worker processes
2023/05/16 11:31:59 [notice] 1#1: start worker process 30
2023/05/16 11:31:59 [notice] 1#1: start worker process 31
::1 - - [16/May/2023:11:39:15 +0000] "GET / HTTP/1.1" 200 615 "-" "curl/7.74.0" "-"
$ kubectl port-forward pod/myapp-pod 8080:80
Forwarding from 127.0.0.1:8080 -> 80
Forwarding from [::1]:8080 -> 80
Handling connection for 8080
Handling connection for 8080
^C%                                                                                                                                
$ kubectl apply -f my-python.yaml
pod/my-python created
$ kubectl get pods
NAME        READY   STATUS              RESTARTS   AGE
myapp-pod   1/1     Running             0          20m
my-python   0/1     ContainerCreating   0          8s
$ kubectl get pods -A
NAMESPACE     NAME                                        READY   STATUS    RESTARTS       AGE
kube-system   calico-node-w8z4q                           1/1     Running   1 (115m ago)   117m
kube-system   calico-kube-controllers-79568db7f8-cxrxj    1/1     Running   0              117m
kube-system   coredns-6f5f9b5d74-mnq5c                    1/1     Running   0              116m
kube-system   hostpath-provisioner-69cd9ff5b8-lrljt       1/1     Running   0              114m
ingress       nginx-ingress-microk8s-controller-5w85d     1/1     Running   0              114m
kube-system   kubernetes-dashboard-dc96f9fc-99cvg         1/1     Running   0              114m
kube-system   dashboard-metrics-scraper-7bc864c59-msmwh   1/1     Running   0              114m
kube-system   metrics-server-6f754f88d-gh5v2              1/1     Running   0              114m
default       myapp-pod                                   1/1     Running   0              20m
default       my-python                                   1/1     Running   0              15s
$ kubectl port-forward pod/my-python 5002:5002
Forwarding from 127.0.0.1:5002 -> 5002
Forwarding from [::1]:5002 -> 5002
Handling connection for 5002
^C%                                                                                                                                
$ kubectl logs my-python
2023-05-16 11:51:53,243 [1] INFO: LOG_LEVEL has value INFO
2023-05-16 11:51:53,243 [1] INFO: REDIS_HOST has value redis
2023-05-16 11:51:53,243 [1] INFO: REDIS_PORT has value 6379
2023-05-16 11:51:53,246 [1] INFO: Started server process [1]
2023-05-16 11:51:53,246 [1] INFO: Waiting for application startup.
2023-05-16 11:51:53,247 [1] INFO: Application startup complete.
2023-05-16 11:51:53,250 [1] INFO: Uvicorn running on http://0.0.0.0:5002 (Press CTRL+C to quit)
2023-05-16 11:53:42,518 [1] INFO: 127.0.0.1:37244 - "GET /healthz HTTP/1.1" 500
$ kubectl describe pod my-python 
Name:             my-python
Namespace:        default
Priority:         0
Service Account:  default
Node:             workshop-6/209.38.243.80
Start Time:       Tue, 16 May 2023 13:51:42 +0200
Labels:           app=my-python
Annotations:      cni.projectcalico.org/containerID: ffcacda003e09f8c8ad2e78c70ea8cd64512e3cf9ba25d12f5444450f77a5d4f
                  cni.projectcalico.org/podIP: 10.1.216.75/32
                  cni.projectcalico.org/podIPs: 10.1.216.75/32
Status:           Running
IP:               10.1.216.75
IPs:
  IP:  10.1.216.75
Containers:
  my-python:
    Container ID:   containerd://e481aff529a7b5c40340926bea659bdf60169afe67294c7d22c3e6bfab567ddd
    Image:          krajewskim/python-api:new
    Image ID:       docker.io/krajewskim/python-api@sha256:7b1b2aee52603f7db8830eb0b0e6945f8b4f5e309774ad5fb46c62192b820ec5
    Port:           <none>
    Host Port:      <none>
    State:          Running
      Started:      Tue, 16 May 2023 13:51:52 +0200
    Ready:          True
    Restart Count:  0
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-87lxs (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             True 
  ContainersReady   True 
  PodScheduled      True 
Volumes:
  kube-api-access-87lxs:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type    Reason     Age    From               Message
  ----    ------     ----   ----               -------
  Normal  Scheduled  9m56s  default-scheduler  Successfully assigned default/my-python to workshop-6
  Normal  Pulling    9m55s  kubelet            Pulling image "krajewskim/python-api:new"
  Normal  Pulled     9m47s  kubelet            Successfully pulled image "krajewskim/python-api:new" in 7.865677704s (7.865694717s including waiting)
  Normal  Created    9m47s  kubelet            Created container my-python
  Normal  Started    9m46s  kubelet            Started container my-python
$ kubectl delete -f my-python.yaml       
pod "my-python" deleted
$ kubectl apply -f my-python.yaml             
pod/my-python created
$ kubectl get pods -A                         
NAMESPACE     NAME                                        READY   STATUS    RESTARTS      AGE
kube-system   calico-node-w8z4q                           1/1     Running   1 (20h ago)   20h
kube-system   calico-kube-controllers-79568db7f8-cxrxj    1/1     Running   0             20h
kube-system   coredns-6f5f9b5d74-mnq5c                    1/1     Running   0             20h
kube-system   hostpath-provisioner-69cd9ff5b8-lrljt       1/1     Running   0             20h
ingress       nginx-ingress-microk8s-controller-5w85d     1/1     Running   0             20h
kube-system   kubernetes-dashboard-dc96f9fc-99cvg         1/1     Running   0             20h
kube-system   dashboard-metrics-scraper-7bc864c59-msmwh   1/1     Running   0             20h
kube-system   metrics-server-6f754f88d-gh5v2              1/1     Running   0             20h
default       myapp-pod                                   1/1     Running   0             19h
default       my-python                                   1/1     Running   0             18h
default       pkad-health                                 1/1     Running   0             4m21s
$ kubectl describe pod my-python
Name:             my-python
Namespace:        default
Priority:         0
Service Account:  default
Node:             workshop-6/209.38.243.80
Start Time:       Wed, 17 May 2023 09:15:00 +0200
Labels:           app=my-python
Annotations:      cni.projectcalico.org/containerID: b684fb4d3060df5a321e29da8e2af77d21350f56c93378a3e82d9a5900489436
                  cni.projectcalico.org/podIP: 10.1.216.82/32
                  cni.projectcalico.org/podIPs: 10.1.216.82/32
Status:           Running
IP:               10.1.216.82
IPs:
  IP:  10.1.216.82
Containers:
  my-python:
    Container ID:   containerd://a40236f8ec1e74c34b320bc82c7dac7d92ba22a9cdc633a1d337e3566a3085fd
    Image:          krajewskim/python-api:new
    Image ID:       docker.io/krajewskim/python-api@sha256:7b1b2aee52603f7db8830eb0b0e6945f8b4f5e309774ad5fb46c62192b820ec5
    Port:           5002/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Wed, 17 May 2023 09:15:02 +0200
    Ready:          False
    Restart Count:  0
    Liveness:       tcp-socket :5002 delay=5s timeout=1s period=10s #success=1 #failure=3
    Readiness:      http-get http://:5002/healthz delay=25s timeout=1s period=10s #success=1 #failure=3
    Environment:    <none>
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-xzrm8 (ro)
Conditions:
  Type              Status
  Initialized       True 
  Ready             False 
  ContainersReady   False 
  PodScheduled      True 
Volumes:
  kube-api-access-xzrm8:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    ConfigMapOptional:       <nil>
    DownwardAPI:             true
QoS Class:                   BestEffort
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age   From               Message
  ----     ------     ----  ----               -------
  Normal   Scheduled  40s   default-scheduler  Successfully assigned default/my-python to workshop-6
  Normal   Pulled     39s   kubelet            Container image "krajewskim/python-api:new" already present on machine
  Normal   Created    39s   kubelet            Created container my-python
  Normal   Started    38s   kubelet            Started container my-python
  Warning  Unhealthy  10s   kubelet            Readiness probe failed: HTTP probe failed with statuscode: 500
$ 